module Test;

interface IFoo{
	Unit setID(String new_id);
	Int printID();
}

interface IBar{
	Int sum();
}

class Foo implements IFoo{
	String id;
	Int i=0;
	
	Unit setID(String new_id){
		this.id=new_id;
		println("new id: " + this.id);
	}
	
	Int printID(){
		IBar b = new Bar(1,1, this);
		while( this.i < 5 ){
			this.i = this.i+1;
			if(this.i == 3) {
				Fut<Unit> f = b!sum();
				await f?;
			}
			println(this.id);
		}
		println("done2");
		return i;
	}
}

class Bar(Int x, Int y, Foo obj) implements IBar{
	Int a;
	
	Int sum(){
		Int i = 0;
		while (i< 10000000){
			this.a= this.x+this.y;
			i=i+1;
		}
		return this.a;
	}
}

{
IFoo obj1=new Foo();
IFoo obj2=new Foo();
obj1!setID("obj1");
Fut <Int> f1=obj1!printID();
Fut <Unit> f2=obj1!setID("fish");
Int a = f1.get;


}